[Tests]
  issues = '#15894'
  design = 'fv_design.md'
  [1d]
    type = Exodiff
    input = 1d.i
    exodiff = 1d_out.e
    requirement = 'The system shall support block restriction of finite volume variables and kernels, and shall properly handle material evaluation in block-restricted settings, in a one-dimensional example.'
  []
  [overlapping-mats]
    type = RunException
    method = 'devel dbg'
    input = 'fv-and-fe-block-restriction.i'
    expect_err = 'Multiple objects supply property ID'
    requirement = 'The system shall error in non-optimized modes if a user supplies material properties with the same name on neighboring subdomains when doing finite volume calculations. This is because we have to support ghosting of material properties.'
  []
  [distinct-mats]
    type = Exodiff
    input = 'fv-and-fe-block-restriction.i'
    exodiff = 'fv-and-fe-block-restriction_out.e'
    requirement = 'The system shall support simultaneous block restriction of finite volume and finite element variables and have coupling of the finite volume variables into the finite element equations.'
    cli_args = "FVKernels/active='good_left_diff left_coupled good_right_diff right_coupled' Materials/active='fe_mat_left good_fv_mat_left fe_mat_right good_fv_mat_right'"
  []
  [jac]
    type = PetscJacobianTester
    input = 'fv-and-fe-block-restriction.i'
    run_sim = True
    requirement = 'The system shall compute a perfect Jacobian when coupling block-restricted finite volume variables into block-restricted finite element calculations.'
    difference_tol = 1e-4
    ratio_tol = 1e-7
    cli_args = "FVKernels/active='good_left_diff left_coupled good_right_diff right_coupled' Materials/active='fe_mat_left good_fv_mat_left fe_mat_right good_fv_mat_right'"
  []
[]
